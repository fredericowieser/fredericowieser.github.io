<!DOCTYPE html>
<html lang="en-gb"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">overview | Fred Wieser</title>
<meta property="og:title" content="overview | Fred Wieser" />
<meta name="twitter:title" content="overview | Fred Wieser" />
<meta itemprop="name" content="overview | Fred Wieser" />
<meta name="application-name" content="overview | Fred Wieser" />
<meta property="og:site_name" content="Fred Wieser" />

<meta name="description" content="Professional Problem Solver">
<meta itemprop="description" content="Professional Problem Solver" />
<meta property="og:description" content="Professional Problem Solver" />
<meta name="twitter:description" content="Professional Problem Solver" />

<meta property="og:locale" content="en-gb" />
<meta name="language" content="en-gb" />

  <link rel="alternate" hreflang="en-gb" href="http://localhost:1313/wieserpedia/_net/fundamentals/logging/overview/" title="" />



  <meta itemprop="image" content="http://localhost:1313/" />
  <meta property="og:image" content="http://localhost:1313/" />
  <meta name="twitter:image" content="http://localhost:1313/" />
  <meta name="twitter:image:src" content="http://localhost:1313/" />





<meta name="generator" content="Hugo 0.128.0">

    

    <link rel="canonical" href="http://localhost:1313/wieserpedia/_net/fundamentals/logging/overview/">
    <link href="/style.min.457a762023c72861206ec5bb10e1b9c48ab24b334b14f6149cddaafd400b6391.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="http://localhost:1313/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

    </head>
<body data-theme = "auto" class="notransition">

<script src="/js/theme.js"></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="http://localhost:1313/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title>Home</title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/">
                        Home
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/projects/">
                        Projects
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/blog/">
                        Blog
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link active" href="/wieserpedia/">
                        Wieserpedia
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/about/">
                        About
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/cv/">
                        CV
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
                
                
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>
<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">overview</h1>
                
                
                <div class="post-meta">
                    <time datetime="2022-06-22T00:00:00-06:00" itemprop="datePublished"> 22 Jun 2022 </time>
                </div>
                
            </header>
            
            <div class="page-content">
                <h1 id="abstract-documentationhttpslearnmicrosoftcomen-usdotnetcoreextensionsloggingtabscommand-line">Abstract [<a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line">Documentation</a>]</h1>
<p>.NET&rsquo;s logging API supports a variety of built-in and third-party logging providers.</p>
<h1 id="concepts">Concepts</h1>
<ul>
<li>Logging <em>providers</em> — an implementation of <code>ILogger&lt;T&gt;</code> that outputs logs</li>
<li>Logging <em>categories</em> — a string associated with each log message</li>
<li>Logging <em>levels</em>:
<ul>
<li><code>Trace</code> = 0 (<r>Warning</r>: may contain sensitive app data; do not enable in production)</li>
<li><code>Debug</code> = 1 (<o>Caution</o>: may produce a high volume of logs)</li>
<li><code>Information</code> = 2 (default if no level specified)</li>
<li><code>Warning</code> = 3 (errors and conditions that do not cause the app to fail)</li>
<li><code>Error</code> = 4 (errors and exceptions in the scope of the current operation (not app-wide) that cannot be handled)</li>
<li><code>Critical</code> = 5 (failures that require immediate attention)</li>
<li><code>None</code> = 6 (use this level to suppress log messages)</li>
</ul>
</li>
</ul>
<h1 id="providers-documentationhttpslearnmicrosoftcomen-usdotnetcoreextensionslogging-providers">Providers [<a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/logging-providers">Documentation</a>]</h1>
<p>Built-in providers include:</p>
<ul>
<li><code>Debug</code> — uses <code>System.Diagnostics.Debug</code> via <code>Debug.WriteLine</code> method and only when a debugger is attached
<ul>
<li><code>DebugLoggerProvider</code> creates <code>DebugLogger</code> instances which implement <code>ILogger.</code></li>
</ul>
</li>
<li><code>Console</code> — logs output to the console</li>
<li><code>EventSource</code> — a cross-platform event source; on Windows, Event Trace for Windows (ETW)
<ul>
<li>Note: <code>dotnet-trace</code> depends on <code>EventSource.</code></li>
</ul>
</li>
<li><code>EventLog</code> — the Windows Event Log; <o>does not inherit default non-provider settings</o>; defaults to <code>LogLevel.Warning</code></li>
<li><code>AzureAppServicesFile</code> — writes logs to text files in an Azure App Service app&rsquo;s file system</li>
<li><code>AzureAppServicesBlob</code> — writes logs to text files in blob storage in an Azure Storage account</li>
<li><code>dotnet trace</code> tool — see <a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/dotnet-trace">dotnet-trace diagnostic tool - .NET CLI | Microsoft Learn</a> and <a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/debug-highcpu?tabs=windows">Debug high CPU usage - .NET Core | Microsoft Learn</a></li>
</ul>
<p>The default providers in the Worker app template are <code>Console</code>, <code>Debug</code>, <code>EventSource</code>, and <code>EventLog</code> (Windows only).</p>
<h1 id="registering-logging-services">Registering Logging Services</h1>
<p>In .NET 6+, logging services register a generic <code>ILogger&lt;T&gt;</code> instead of a non-generic <code>ILogger</code>.</p>
<p>Logging with Generic Host:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#ff7b72">class</span> <span style="color:#f0883e;font-weight:bold">Program</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">static</span> Task Main(<span style="color:#ff7b72">string</span>[] args) {
</span></span><span style="display:flex;"><span>		<span style="color:#8b949e;font-style:italic">// Create the host:</span>
</span></span><span style="display:flex;"><span>		IHost host = Host.CreateDefaultBuilder(args)
</span></span><span style="display:flex;"><span>			<span style="color:#8b949e;font-style:italic">// By default, these logging providers are added by CreateDefaultBuilder: Console, Debug, EventSource, EventLog (Windows only)</span>
</span></span><span style="display:flex;"><span>			.ConfigureLogging(logging =&gt; {
</span></span><span style="display:flex;"><span>				logging.ClearProviders(); <span style="color:#8b949e;font-style:italic">// Clear the default logging providers.</span>
</span></span><span style="display:flex;"><span>				logging.SetMinimumLevel(LogLevel.Warning); <span style="color:#8b949e;font-style:italic">// Set the minimum log level if not found in configuration.</span>
</span></span><span style="display:flex;"><span>				logging.AddConsole(); <span style="color:#8b949e;font-style:italic">// Only add the Console logging provider back.</span>
</span></span><span style="display:flex;"><span>			.Build();
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#8b949e;font-style:italic">// Get an ILogger instance from DI:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#ff7b72">var</span> logger = host.Services.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();
</span></span><span style="display:flex;"><span>		logger.LogInformation(<span style="color:#a5d6ff">&#34;Host created.&#34;</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#ff7b72">return</span> host.RunAsync();
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Logging without a Generic Host:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#ff7b72">class</span> <span style="color:#f0883e;font-weight:bold">Program</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">static</span> <span style="color:#ff7b72">void</span> Main(<span style="color:#ff7b72">string</span>[] args) {
</span></span><span style="display:flex;"><span>		<span style="color:#ff7b72">using</span> <span style="color:#ff7b72">var</span> loggerFactory = LoggerFactory.Create(builder =&gt; {
</span></span><span style="display:flex;"><span>			builder
</span></span><span style="display:flex;"><span>				<span style="color:#8b949e;font-style:italic">// Filters are invoked for all providers that do not have rules assigned to them:</span>
</span></span><span style="display:flex;"><span>				.AddFilter(<span style="color:#a5d6ff">&#34;SomeCategory&#34;</span>, LogLevel.Warning)
</span></span><span style="display:flex;"><span>				.AddFilter(<span style="color:#a5d6ff">&#34;OtherCategory&#34;</span>, LogLevel.Information)
</span></span><span style="display:flex;"><span>				.AddFilter(<span style="color:#a5d6ff">&#34;Namespace.Program&#34;</span>, LogLevel.Debug)
</span></span><span style="display:flex;"><span>				.AddConsole();
</span></span><span style="display:flex;"><span>		});
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		ILogger logger = loggerFactory.CreateLogger&lt;Program&gt;();
</span></span><span style="display:flex;"><span>		logger.LogInformation(<span style="color:#a5d6ff">&#34;Log message.&#34;</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="configuration-documentationhttpsdocsmicrosoftcomen-usdotnetcoreextensionsloggingtabscommand-lineset-log-level-by-command-line-environment-variables-and-other-configuration">Configuration [<a href="https://docs.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#set-log-level-by-command-line-environment-variables-and-other-configuration">Documentation</a>]</h1>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#7ee787">&#34;Logging&#34;</span>: { <span style="color:#8b949e;font-style:italic">// This is the &#34;Logging&#34; property.
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>        <span style="color:#7ee787">&#34;LogLevel&#34;</span>: { <span style="color:#8b949e;font-style:italic">// These are global settings.
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>            <span style="color:#7ee787">&#34;Default&#34;</span>: <span style="color:#a5d6ff">&#34;Error&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#7ee787">&#34;Microsoft&#34;</span>: <span style="color:#a5d6ff">&#34;Warning&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#7ee787">&#34;Debug&#34;</span>: { <span style="color:#8b949e;font-style:italic">// The &#34;Debug&#34; provider has two categories: &#34;Default&#34; and &#34;Microsoft.Hosting&#34;.
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>            <span style="color:#7ee787">&#34;LogLevel&#34;</span>: { <span style="color:#8b949e;font-style:italic">// These settings override the global settings above.
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>                <span style="color:#7ee787">&#34;Default&#34;</span>: <span style="color:#a5d6ff">&#34;Information&#34;</span>, <span style="color:#8b949e;font-style:italic">// Use the &#34;Information&#34; log level for every category except
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>				 		   <span style="color:#8b949e;font-style:italic">// &#34;Microsoft.Hosting&#34; below.
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>                <span style="color:#7ee787">&#34;Microsoft.Hosting&#34;</span>: <span style="color:#a5d6ff">&#34;Trace&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#7ee787">&#34;EventSource&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#7ee787">&#34;LogLevel&#34;</span>: {
</span></span><span style="display:flex;"><span>                <span style="color:#7ee787">&#34;Default&#34;</span>: <span style="color:#a5d6ff">&#34;Warning&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="reloading-configuration">Reloading Configuration</h2>
<p>To reload configuration that changed in code while the app is running, call <code>IConfigurationRoot.Reload</code>.</p>
<h1 id="creating-logs">Creating Logs</h1>
<p>Retrieve an <code>ILogger&lt;T&gt;</code> from DI:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#ff7b72">public</span> <span style="color:#ff7b72">sealed</span> <span style="color:#ff7b72">class</span> <span style="color:#f0883e;font-weight:bold">Worker</span> : BackgroundService
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">private</span> <span style="color:#ff7b72">readonly</span> ILogger&lt;Worker&gt; _logger;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">public</span> Worker(ILogger&lt;Worker&gt; logger) =&gt;
</span></span><span style="display:flex;"><span>        _logger = logger;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">protected</span> <span style="color:#ff7b72">override</span> <span style="color:#ff7b72">async</span> Task ExecuteAsync(CancellationToken stoppingToken)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ff7b72">while</span> (!stoppingToken.IsCancellationRequested)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            _logger.LogInformation(<span style="color:#a5d6ff">&#34;Worker running at: {time}&#34;</span>, DateTimeOffset.UtcNow);
</span></span><span style="display:flex;"><span>            <span style="color:#ff7b72">await</span> Task.Delay(<span style="color:#a5d6ff">1_000</span>, stoppingToken);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="log-level-extension-methods">Log Level Extension Methods</h2>
<p><code>ILogger</code> has extension methods:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>_logger.Log(LogLevel.Information, <span style="color:#f85149">…</span>);
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">// …is equivalent to…</span>
</span></span><span style="display:flex;"><span>_logger.LogInformation(<span style="color:#f85149">…</span>);
</span></span></code></pre></div><h1 id="logging-features">Logging Features</h1>
<h2 id="categories">Categories</h2>
<p><code>ILogger&lt;T&gt;</code>&rsquo;s category is an arbitrary string (by convention it is the class name). The category is included with each message of that <code>ILogger</code> instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#ff7b72">namespace</span> <span style="color:#ff7b72">Example</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">public</span> <span style="color:#ff7b72">class</span> <span style="color:#f0883e;font-weight:bold">DefaultService</span> : IService {
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">private</span> <span style="color:#ff7b72">readonly</span> ILogger&lt;DefaultService&gt; _logger;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">public</span> DefaultService(ILogger&lt;DefaultService&gt; logger) =&gt;
</span></span><span style="display:flex;"><span>        _logger = logger;
</span></span><span style="display:flex;"><span>        <span style="color:#8b949e;font-style:italic">// ...</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>To explicitly specify the category:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#ff7b72">public</span> <span style="color:#ff7b72">class</span> <span style="color:#f0883e;font-weight:bold">DefaultService</span> : IService {
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">private</span> <span style="color:#ff7b72">readonly</span> ILogger _logger;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">public</span> DefaultService(ILoggerFactory loggerFactory) =&gt;
</span></span><span style="display:flex;"><span>        _logger = loggerFactory.CreateLogger(<span style="color:#a5d6ff">&#34;CustomCategory&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>ILogger&lt;T&gt;</code> is equivalent to calling <code>CreateLogger(T).</code></p>
<h2 id="event-ids">Event IDs</h2>
<blockquote>
<p>Documentation: <a href="https://docs.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#log-event-id">https://docs.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#log-event-id</a></p>
</blockquote>
<p>An <code>EventId</code> is a struct with an <code>Id</code> and optional <code>Name</code> readonly properties.  The event ID can associate a set of events.</p>
<p>The <code>Debug</code> provider does not show event IDs.  The <code>Console</code> provider shows event IDs in brackets after the category:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-posh" data-lang="posh"><span style="display:flex;"><span>info<span style="color:#f85149">:</span> Example.<span style="color:#79c0ff">DefaultService</span>.GetAsync[<span style="color:#a5d6ff">1001</span>]
</span></span></code></pre></div><h3 id="using-event-ids">Using Event IDs</h3>
<p>Create a class like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#ff7b72">internal</span> <span style="color:#ff7b72">static</span> <span style="color:#ff7b72">class</span> <span style="color:#f0883e;font-weight:bold">AppLogEvents</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">internal</span> EventId Create = <span style="color:#ff7b72">new</span>(<span style="color:#a5d6ff">1000</span>, <span style="color:#a5d6ff">&#34;Created&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">internal</span> EventId Read = <span style="color:#ff7b72">new</span>(<span style="color:#a5d6ff">1001</span>, <span style="color:#a5d6ff">&#34;Read&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">internal</span> EventId Update = <span style="color:#ff7b72">new</span>(<span style="color:#a5d6ff">1002</span>, <span style="color:#a5d6ff">&#34;Updated&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">internal</span> EventId Delete = <span style="color:#ff7b72">new</span>(<span style="color:#a5d6ff">1003</span>, <span style="color:#a5d6ff">&#34;Deleted&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#8b949e;font-style:italic">// ...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <code>Log*</code> methods have overloads to accept an event ID:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>_logger.LogWarning(AppLogEvents.ReadNotFound, <span style="color:#a5d6ff">&#34;GetAsync({Id}) not found&#34;</span>, id);
</span></span></code></pre></div><p><o>Note</o>: The <code>Debug</code> logging provider does not show event IDs.</p>
<h2 id="exceptions">Exceptions</h2>
<p>The logger methods have overloads that take an exception parameter:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#ff7b72">catch</span> (Exception ex)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    _logger.LogWarning(
</span></span><span style="display:flex;"><span>        AppLogEvents.Error, ex,
</span></span><span style="display:flex;"><span>        <span style="color:#a5d6ff">&#34;Failed to process iteration: {Id}&#34;</span>, id);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="filters">Filters</h2>
<blockquote>
<p>Documentation: <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#how-filtering-rules-are-applied">https://learn.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#how-filtering-rules-are-applied</a><br>
Documentation: <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#filter-function">https://learn.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#filter-function</a></p>
</blockquote>
<p>When an <code>ILogger&lt;T&gt;</code> object is created, <code>ILoggerFactory</code> selects a single rule per provider to apply to that logger. Messages written by that instance are filtered based on the rule. The most specific rule for each provider and category pair is selected.</p>
<h2 id="message-templates">Message Templates</h2>
<ul>
<li>Log APIs use a message template that can contains placeholders for arguments provided.</li>
<li>This enables logging providers to implement structured (semantic) logging.</li>
<li>This also allows you to avoid the use of string interpolation which has performance consequences.</li>
<li>Documentation: <a href="https://docs.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#log-message-template">https://docs.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#log-message-template</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#ff7b72">int</span> value1 = <span style="color:#a5d6ff">3</span>;
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">int</span> value2 = <span style="color:#a5d6ff">9</span>;
</span></span><span style="display:flex;"><span>_logger.LogInformation(<span style="color:#a5d6ff">&#34;Values: {v2}, {v1}&#34;</span>, value1, value2); <span style="color:#8b949e;font-style:italic">// output: 3, 9</span>
</span></span></code></pre></div><p><o>Use the above technique instead of string interpolation to avoid performance problems.</o></p>
<h3 id="formatting-message-templates">Formatting Message Templates</h3>
<p>Log message templates utilize the base <a href="https://learn.microsoft.com/en-us/dotnet/standard/base-types/formatting-types">formatting types</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>_logger.LogInformation(<span style="color:#a5d6ff">&#34;Logged on {PlaceHolderName:MMMM dd, yyyy}&#34;</span>, DateTimeOffset.UtcNow); <span style="color:#8b949e;font-style:italic">// Logged on January 06, 2022</span>
</span></span></code></pre></div><p>Message templates also support the <code>@</code> structure capturing operator.  This allows you to log the values of an object&rsquo;s properties:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>Person person = <span style="color:#ff7b72">new</span> Person() { FirstName = <span style="color:#a5d6ff">&#34;John&#34;</span>, LastName = <span style="color:#a5d6ff">&#34;Doe&#34;</span> };
</span></span><span style="display:flex;"><span>_logger.LogInformation(<span style="color:#a5d6ff">&#34;Found {@Person}&#34;</span>, person); <span style="color:#8b949e;font-style:italic">// output: Found Person { FirstName=&#34;John&#34;, LastName=&#34;Doe&#34; }</span>
</span></span></code></pre></div><h2 id="log-scopes">Log Scopes</h2>
<blockquote>
<p>Documentation: <a href="https://docs.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#log-scopes">https://docs.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#log-scopes</a></p>
</blockquote>
<p>A scope groups a set of logical operations.  For example, every log created as part of processing a transaction can include the transaction ID.</p>
<p>Scopes are supported by the <code>Console</code>, <code>AzureAppServicesFile</code>, and <code>AzureAppService</code>&rsquo;s Blob providers.</p>
<h1 id="no-async-methods">No Async Methods</h1>
<p>Logging should be so fast that it is not worth the performance cost of asynchronous code.</p>
<h1 id="creating-logs-in-main">Creating Logs in Main</h1>
<p>Get an <code>ILogger</code> instance from DI immediately after building the host:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#ff7b72">using</span> <span style="color:#ff7b72">Microsoft.Extensions.DependencyInjection</span>;
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">using</span> <span style="color:#ff7b72">Microsoft.Extensions.Hosting</span>;
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">using</span> <span style="color:#ff7b72">Microsoft.Extensions.Logging</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">using</span> <span style="color:#ff7b72">IHost</span> host = Host.CreateApplicationBuilder(args).Build();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> logger = host.Services.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();
</span></span><span style="display:flex;"><span>logger.LogInformation(<span style="color:#a5d6ff">&#34;Host created.&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">await</span> host.RunAsync();
</span></span></code></pre></div>
            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/fredericowieser" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="https://twitter.com/fredericowieser" target="_blank" rel="noopener noreferrer me"
    title="Twitter">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z">
    </path>
</svg>
</a>
<a href="https://www.youtube.com/channel/UCl3L6n0BcAsESYhQSx2uomg" target="_blank" rel="noopener noreferrer me"
    title="Youtube">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z">
    </path>
    <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
</svg>
</a>
<a href="mailto:frederico.wieser@uclmail.net" target="_blank" rel="noopener noreferrer me"
    title="Email">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
    <polyline points="22,6 12,13 2,6"></polyline>
</svg>
</a>
<a href="https://www.linkedin.com/in/frederico-wieser/" target="_blank" rel="noopener noreferrer me"
    title="Linkedin">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
    <rect x="2" y="9" width="4" height="12"></rect>
    <circle cx="4" cy="4" r="2"></circle>
</svg>
</a>
</div>
    <small class="footer_copyright">
        © 2024 Fred Wieser.
        Powered by <a href="https://github.com/hugo-sid/hugo-blog-awesome" target="_blank" rel="noopener">Hugo blog awesome</a>.
    </small>
</footer><a href="#" title="Go to top" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    




    
    
        
    

    
    
        
    



    
    <script async src="http://localhost:1313/js/main.js" ></script>

    

</body>
</html>
